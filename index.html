<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„ÇØ„Ç§„Ç∫„Ç¢„Éó„É™</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body { 
            font-family: 'Inter', sans-serif; 
            background: linear-gradient(135deg, #00c4cc 0%, #7b68ee 50%, #ff6b9d 100%);
            min-height: 100vh;
        }
        .canva-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .quiz-card {
            background: linear-gradient(135deg, #00c4cc 0%, #7b68ee 100%);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }
        .quiz-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
            pointer-events: none;
        }
        .option-button {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(0);
            border: 2px solid transparent;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }
        .option-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(0, 196, 204, 0.3);
            border-color: #00c4cc;
        }
        .option-selected {
            background: linear-gradient(135deg, #00c4cc, #7b68ee) !important;
            color: white !important;
            border-color: #00c4cc !important;
        }
        .correct { 
            background: linear-gradient(135deg, #00d4aa, #00c4cc) !important; 
            animation: correctPulse 0.6s ease-out;
        }
        .incorrect { 
            background: linear-gradient(135deg, #ff6b9d, #ff8a80) !important; 
            animation: incorrectShake 0.6s ease-out;
        }
        .progress-bar {
            background: linear-gradient(90deg, #00c4cc, #7b68ee, #ff6b9d);
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }
        .canva-button {
            background: linear-gradient(135deg, #00c4cc, #7b68ee);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        .canva-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 196, 204, 0.4);
        }
        .canva-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        .canva-button:hover::before {
            left: 100%;
        }
        .floating-shapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        .shape {
            position: absolute;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }
        .shape:nth-child(1) { top: 10%; left: 10%; animation-delay: 0s; }
        .shape:nth-child(2) { top: 20%; right: 10%; animation-delay: 2s; }
        .shape:nth-child(3) { bottom: 20%; left: 20%; animation-delay: 4s; }
        .shape:nth-child(4) { bottom: 10%; right: 20%; animation-delay: 1s; }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body>
    <!-- Floating Background Shapes -->
    <div class="floating-shapes">
        <div class="shape">
            <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                <circle cx="40" cy="40" r="30" fill="#00c4cc"/>
            </svg>
        </div>
        <div class="shape">
            <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
                <rect x="15" y="15" width="30" height="30" rx="8" fill="#7b68ee"/>
            </svg>
        </div>
        <div class="shape">
            <svg width="70" height="70" viewBox="0 0 70 70" fill="none">
                <polygon points="35,10 55,50 15,50" fill="#ff6b9d"/>
            </svg>
        </div>
        <div class="shape">
            <svg width="50" height="50" viewBox="0 0 50 50" fill="none">
                <path d="M25 5 L45 25 L25 45 L5 25 Z" fill="#00d4aa"/>
            </svg>
        </div>
    </div>
    
    <div class="container mx-auto px-4 py-8 max-w-4xl relative z-10">
        <!-- „É≠„Ç∞„Ç§„É≥ÁîªÈù¢ -->
        <div id="loginContainer" class="canva-card rounded-3xl p-8 mb-8 text-center">
            <div class="mb-6">
                <h1 class="text-5xl font-bold bg-gradient-to-r from-cyan-500 to-purple-600 bg-clip-text text-transparent mb-3">
                    ‚ú® „ÇÜ„Çã„Éû„Éº„Ç±ÈÅìÂ†¥
                </h1>
                <p class="text-gray-700 text-lg font-medium">Êßò„ÄÖ„Å™ÂΩ¢Âºè„ÅÆÂïèÈ°å„Å´ÊåëÊà¶„Åó„Çà„ÅÜÔºÅ</p>
            </div>
            
            <div class="max-w-md mx-auto">
                <div class="mb-6">
                    <input type="email" id="loginEmail" placeholder="„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ" 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent mb-3">
                    <input type="password" id="loginPassword" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ" 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                </div>
                
                <div class="space-y-3">
                    <button onclick="login()" class="canva-button text-white px-8 py-3 rounded-2xl font-semibold w-full shadow-lg">
                        üîë „É≠„Ç∞„Ç§„É≥
                    </button>
                    <button onclick="showRegister()" class="bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-2xl font-semibold w-full shadow-lg transition-all">
                        üìù Êñ∞Ë¶èÁôªÈå≤
                    </button>
                    <button onclick="loginAsGuest()" class="bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-2xl font-semibold w-full shadow-lg transition-all">
                        üë§ „Ç≤„Çπ„Éà„É≠„Ç∞„Ç§„É≥ÔºàÁÑ°Êñô„Éó„É©„É≥Ôºâ
                    </button>
                </div>
                
                <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                    <h3 class="font-semibold text-blue-800 mb-2">üí° „Éá„É¢Áî®„Ç¢„Ç´„Ç¶„É≥„Éà</h3>
                    <div class="text-sm text-blue-700 space-y-1">
                        <p><strong>ÁÑ°Êñô„Éó„É©„É≥:</strong> demo@free.com / password123</p>
                        <p><strong>„Éó„É¨„Éü„Ç¢„É†„Éó„É©„É≥:</strong> demo@premium.com / password123</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Êñ∞Ë¶èÁôªÈå≤ÁîªÈù¢ -->
        <div id="registerContainer" class="hidden canva-card rounded-3xl p-8 mb-8 text-center">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">üìù Êñ∞Ë¶èÁôªÈå≤</h2>
            
            <div class="max-w-md mx-auto">
                <div class="mb-6 space-y-3">
                    <input type="text" id="registerName" placeholder="„ÅäÂêçÂâç" 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    <input type="email" id="registerEmail" placeholder="„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ" 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    <input type="password" id="registerPassword" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ" 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                </div>
                
                <div class="space-y-3">
                    <button onclick="register()" class="canva-button text-white px-8 py-3 rounded-2xl font-semibold w-full shadow-lg">
                        ‚ú® ÁôªÈå≤„Åô„ÇãÔºàÁÑ°Êñô„Éó„É©„É≥Ôºâ
                    </button>
                    <button onclick="showLogin()" class="bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-2xl font-semibold w-full shadow-lg transition-all">
                        ‚Üê „É≠„Ç∞„Ç§„É≥ÁîªÈù¢„Å´Êàª„Çã
                    </button>
                </div>
            </div>
        </div>

        <!-- „Éò„ÉÉ„ÉÄ„ÉºÔºà„É≠„Ç∞„Ç§„É≥ÂæåÔºâ -->
        <div id="mainHeader" class="hidden">
            <div class="flex justify-between items-center mb-8">
                <div class="canva-card rounded-3xl px-8 py-6">
                    <h1 class="text-4xl font-bold bg-gradient-to-r from-cyan-500 to-purple-600 bg-clip-text text-transparent mb-2">
                        ‚ú® „ÇÜ„Çã„Éû„Éº„Ç±ÈÅìÂ†¥
                    </h1>
                    <p class="text-gray-700 text-lg font-medium">Êßò„ÄÖ„Å™ÂΩ¢Âºè„ÅÆÂïèÈ°å„Å´ÊåëÊà¶„Åó„Çà„ÅÜÔºÅ</p>
                </div>
                
                <div class="canva-card rounded-3xl px-6 py-4">
                    <div class="flex items-center space-x-4">
                        <div class="text-right">
                            <div class="font-semibold text-gray-800" id="userNameDisplay">„É¶„Éº„Ç∂„ÉºÂêç</div>
                            <div class="flex items-center">
                                <span id="userPlanDisplay" class="text-sm px-3 py-1 rounded-full bg-blue-100 text-blue-600">ÁÑ°Êñô„Éó„É©„É≥</span>
                                <button id="upgradeButton" onclick="showUpgradeModal()" class="hidden ml-2 text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full hover:shadow-lg transition-all">
                                    ‚≠ê „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ
                                </button>
                            </div>
                        </div>
                        <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-medium transition-all">
                            „É≠„Ç∞„Ç¢„Ç¶„Éà
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- „Éó„É¨„Éü„Ç¢„É†„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„É¢„Éº„ÉÄ„É´ -->
        <div id="upgradeModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="canva-card rounded-3xl p-8 max-w-md mx-4">
                <div class="text-center">
                    <div class="text-6xl mb-4">‚≠ê</div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">„Éó„É¨„Éü„Ç¢„É†„Éó„É©„É≥„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ</h2>
                    <p class="text-gray-600 mb-6">‰∏≠Á¥ö„Éª‰∏äÁ¥öÂïèÈ°å„Å´„Ç¢„ÇØ„Çª„Çπ„Åó„Å¶„ÄÅ„Åï„Çâ„Å™„Çã„Çπ„Ç≠„É´„Ç¢„ÉÉ„Éó„ÇíÔºÅ</p>
                    
                    <div class="bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl p-6 mb-6">
                        <div class="text-4xl font-bold mb-2">¬•980</div>
                        <div class="text-lg">ÊúàÈ°ç</div>
                    </div>
                    
                    <div class="text-left mb-6 space-y-2">
                        <div class="flex items-center">
                            <span class="text-green-500 mr-2">‚úì</span>
                            <span>ÂÖ®Èõ£ÊòìÂ∫¶„ÅÆÂïèÈ°å„Å´„Ç¢„ÇØ„Çª„Çπ</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-green-500 mr-2">‚úì</span>
                            <span>Ë©≥Á¥∞„Å™Ëß£Ë™¨‰ªò„Åç</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-green-500 mr-2">‚úì</span>
                            <span>ÈÄ≤Êçó„É¨„Éù„Éº„ÉàÊ©üËÉΩ</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-green-500 mr-2">‚úì</span>
                            <span>ÂÑ™ÂÖà„Çµ„Éù„Éº„Éà</span>
                        </div>
                    </div>
                    
                    <div class="space-y-3">
                        <button onclick="upgradeToPremium()" class="canva-button text-white px-8 py-3 rounded-2xl font-semibold w-full shadow-lg">
                            üí≥ ‰ªä„Åô„Åê„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ
                        </button>
                        <button onclick="closeUpgradeModal()" class="bg-gray-400 hover:bg-gray-500 text-white px-8 py-3 rounded-2xl font-semibold w-full shadow-lg transition-all">
                            Âæå„Åß
                        </button>
                    </div>
                    
                    <p class="text-xs text-gray-500 mt-4">‚Äª „Éá„É¢Áâà„Åß„ÅØÂÆüÈöõ„ÅÆË™≤Èáë„ÅØÁô∫Áîü„Åó„Åæ„Åõ„Çì</p>
                </div>
            </div>
        </div>

        <!-- „Çπ„Éó„É¨„ÉÉ„Éâ„Ç∑„Éº„ÉàË®≠ÂÆö„Éë„Éç„É´ -->
        <div id="setupPanel" class="hidden canva-card rounded-3xl p-8 mb-8">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">üìä ÂïèÈ°å„Éá„Éº„ÇøË®≠ÂÆö</h2>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Google „Çπ„Éó„É¨„ÉÉ„Éâ„Ç∑„Éº„Éà URL</label>
                    <input type="text" id="spreadsheetUrl" 
                           placeholder="https://docs.google.com/spreadsheets/d/..." 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    <p class="text-sm text-gray-500 mt-1">‚Äª „Çπ„Éó„É¨„ÉÉ„Éâ„Ç∑„Éº„Éà„ÅØ„Äå„É™„É≥„ÇØ„ÇíÁü•„Å£„Å¶„ÅÑ„ÇãÂÖ®Âì°„ÅåÈñ≤Ë¶ßÂèØËÉΩ„Äç„Å´Ë®≠ÂÆö„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                </div>
                
                <!-- „ÇØ„Ç§„Ç∫Ë®≠ÂÆö -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">üìö „Ç´„ÉÜ„Ç¥„É™ÈÅ∏Êäû</label>
                        <select id="categorySelect" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                            <option value="all">„Åô„Åπ„Å¶„ÅÆ„Ç´„ÉÜ„Ç¥„É™</option>
                        </select>
                        <p class="text-xs text-gray-500 mt-1">ÂïèÈ°åÊï∞: <span id="categoryCount">0</span>Âïè</p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‚≠ê Èõ£ÊòìÂ∫¶ÈÅ∏Êäû</label>
                        <select id="difficultySelect" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                            <option value="all">„Åô„Åπ„Å¶„ÅÆÈõ£ÊòìÂ∫¶</option>
                        </select>
                        <p class="text-xs text-gray-500 mt-1">ÈÅ∏Êäû‰∏≠: <span id="difficultyCount">0</span>Âïè</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">üîÄ ÂïèÈ°å„ÅÆÈ†ÜÂ∫è</label>
                        <select id="shuffleMode" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                            <option value="normal">È†ÜÁï™ÈÄö„Çä</option>
                            <option value="shuffle">„É©„É≥„ÉÄ„É†</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‚è±Ô∏è Âà∂ÈôêÊôÇÈñìÔºàÂàÜÔºâ</label>
                        <select id="timeLimit" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                            <option value="0">Âà∂Èôê„Å™„Åó</option>
                            <option value="5">5ÂàÜ</option>
                            <option value="10">10ÂàÜ</option>
                            <option value="15">15ÂàÜ</option>
                            <option value="30">30ÂàÜ</option>
                        </select>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button onclick="loadSampleData()" class="canva-button text-white px-8 py-4 rounded-2xl font-semibold text-lg shadow-lg">
                        üìù „Çµ„É≥„Éó„É´„Éá„Éº„Çø„Çí‰ΩøÁî®
                    </button>
                    <button onclick="loadFromSpreadsheet()" class="canva-button text-white px-8 py-4 rounded-2xl font-semibold text-lg shadow-lg">
                        üìä „Çπ„Éó„É¨„ÉÉ„Éâ„Ç∑„Éº„Éà„Åã„ÇâË™≠„ÅøËæº„Åø
                    </button>
                </div>
                
                <div id="startQuizSection" class="hidden mt-8 text-center">
                    <button onclick="startQuiz()" class="canva-button text-white px-12 py-5 rounded-2xl font-bold text-xl shadow-2xl transform hover:scale-105">
                        üöÄ „ÇØ„Ç§„Ç∫„ÇíÈñãÂßã„Åô„Çã
                    </button>
                </div>
                <div id="loadingMessage" class="hidden mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                    <div class="flex items-center">
                        <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-3"></div>
                        <span class="text-blue-700">„Çπ„Éó„É¨„ÉÉ„Éâ„Ç∑„Éº„Éà„Åã„Çâ„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø‰∏≠...</span>
                    </div>
                </div>
                
                <!-- „Éá„Éº„ÇøÊ§úË®ºÁµêÊûú -->
                <div id="validationResults" class="hidden mt-4"></div>
            </div>
        </div>

        <!-- „Çπ„Éó„É¨„ÉÉ„Éâ„Ç∑„Éº„ÉàË®≠ÂÆöÊâãÈ†Ü -->
        <div class="canva-card rounded-3xl p-6 mb-6 border-l-4 border-yellow-400">
            <h3 class="text-lg font-semibold text-yellow-800 mb-3">‚ö†Ô∏è ÈáçË¶ÅÔºö„Çπ„Éó„É¨„ÉÉ„Éâ„Ç∑„Éº„Éà„ÅÆÂÖ¨ÈñãË®≠ÂÆö</h3>
            <ol class="text-sm text-yellow-700 space-y-2">
                <li><strong>1.</strong> Google „Çπ„Éó„É¨„ÉÉ„Éâ„Ç∑„Éº„Éà„Åß„ÄåÂÖ±Êúâ„Äç„Éú„Çø„É≥„Çí„ÇØ„É™„ÉÉ„ÇØ</li>
                <li><strong>2.</strong> „Äå„É™„É≥„ÇØ„ÇíÁü•„Å£„Å¶„ÅÑ„ÇãÂÖ®Âì°„ÅåÈñ≤Ë¶ßÂèØËÉΩ„Äç„Å´Ë®≠ÂÆö</li>
                <li><strong>3.</strong> „Äå„É™„É≥„ÇØ„Çí„Ç≥„Éî„Éº„Äç„Åó„Å¶URL„ÇíÂèñÂæó</li>
                <li><strong>4.</strong> ‰∏äË®ò„ÅÆURLÂÖ•ÂäõÊ¨Ñ„Å´Ë≤º„Çä‰ªò„Åë</li>
            </ol>
        </div>

        <!-- „Éá„Éº„ÇøÂΩ¢ÂºèË™¨Êòé -->
        <div class="canva-card rounded-3xl p-6 mb-8">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">üìã „Çπ„Éó„É¨„ÉÉ„Éâ„Ç∑„Éº„ÉàÂΩ¢Âºè</h3>
            <div class="mb-4 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                <div class="flex items-start">
                    <span class="text-blue-500 mr-2 mt-1">üí°</span>
                    <div>
                        <h4 class="font-medium text-blue-800 mb-1">Ëß£Ë™¨Ê©üËÉΩ„Å´„Å§„ÅÑ„Å¶</h4>
                        <p class="text-blue-700 text-sm">GÂàó„Å´Ëß£Ë™¨„ÇíËøΩÂä†„Åô„Çã„Å®„ÄÅ„Éó„É¨„Éü„Ç¢„É†„Éó„É©„É≥„É¶„Éº„Ç∂„Éº„Å´ÂïèÈ°å„ÅÆË©≥Á¥∞„Å™Ëß£Ë™¨„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇËß£Ë™¨„ÅØÁ©∫Ê¨Ñ„Åß„ÇÇÊßã„ÅÑ„Åæ„Åõ„Çì„ÄÇ</p>
                    </div>
                </div>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-4 py-2 text-left">ÂàóA: ÂïèÈ°åÊñá</th>
                            <th class="px-4 py-2 text-left">ÂàóB: ÂïèÈ°å„Çø„Ç§„Éó</th>
                            <th class="px-4 py-2 text-left">ÂàóC: ÈÅ∏ÊäûËÇ¢</th>
                            <th class="px-4 py-2 text-left">ÂàóD: Ê≠£Ëß£</th>
                            <th class="px-4 py-2 text-left">ÂàóE: „Ç´„ÉÜ„Ç¥„É™</th>
                            <th class="px-4 py-2 text-left">ÂàóF: Èõ£ÊòìÂ∫¶</th>
                            <th class="px-4 py-2 text-left">ÂàóG: Ëß£Ë™¨Ôºà‰ªªÊÑèÔºâ</th>
                        </tr>
                    </thead>
                    <tbody class="text-gray-600">
                        <tr class="border-t">
                            <td class="px-4 py-2">Êó•Êú¨„ÅÆÈ¶ñÈÉΩ„ÅØÔºü</td>
                            <td class="px-4 py-2">single</td>
                            <td class="px-4 py-2">Êù±‰∫¨,Â§ßÈò™,‰∫¨ÈÉΩ,ÂêçÂè§Â±ã</td>
                            <td class="px-4 py-2">Êù±‰∫¨</td>
                            <td class="px-4 py-2">‰∏ÄËà¨Áü•Ë≠ò</td>
                            <td class="px-4 py-2">ÂàùÁ¥ö</td>
                            <td class="px-4 py-2">Êó•Êú¨„ÅÆÈ¶ñÈÉΩ„ÅØÊù±‰∫¨„Åß„Åô„ÄÇ1868Âπ¥„ÅÆÊòéÊ≤ªÁ∂≠Êñ∞‰ª•Èôç„ÄÅÊîøÊ≤ª„ÉªÁµåÊ∏à„ÅÆ‰∏≠ÂøÉÂú∞„Å®„Åó„Å¶Áô∫Â±ï„Åó„Å¶„Åç„Åæ„Åó„Åü„ÄÇ</td>
                        </tr>
                        <tr class="border-t">
                            <td class="px-4 py-2">Âú∞ÁêÉ„ÅØ‰∏∏„ÅÑ</td>
                            <td class="px-4 py-2">truefalse</td>
                            <td class="px-4 py-2">‚óã,√ó</td>
                            <td class="px-4 py-2">‚óã</td>
                            <td class="px-4 py-2">ÁßëÂ≠¶</td>
                            <td class="px-4 py-2">ÂàùÁ¥ö</td>
                            <td class="px-4 py-2">Âú∞ÁêÉ„ÅØÁêÉ‰ΩìÔºàÂé≥ÂØÜ„Å´„ÅØÂõûËª¢Ê•ïÂÜÜ‰ΩìÔºâ„ÅÆÂΩ¢„Çí„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÂè§‰ª£„ÇÆ„É™„Ç∑„É£ÊôÇ‰ª£„Åã„ÇâÁü•„Çâ„Çå„Å¶„ÅÑ„Åü‰∫ãÂÆü„Åß„Åô„ÄÇ</td>
                        </tr>
                        <tr class="border-t">
                            <td class="px-4 py-2">„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞Ë®ÄË™û„ÅØÔºü</td>
                            <td class="px-4 py-2">multiple</td>
                            <td class="px-4 py-2">JavaScript,Python,HTML,CSS</td>
                            <td class="px-4 py-2">JavaScript,Python</td>
                            <td class="px-4 py-2">IT</td>
                            <td class="px-4 py-2">‰∏≠Á¥ö</td>
                            <td class="px-4 py-2">JavaScript„Å®Python„ÅØ„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞Ë®ÄË™û„Åß„Åô„ÄÇHTML„ÅØ„Éû„Éº„ÇØ„Ç¢„ÉÉ„ÉóË®ÄË™û„ÄÅCSS„ÅØ„Çπ„Çø„Ç§„É´„Ç∑„Éº„ÉàË®ÄË™û„Åß„ÄÅÂé≥ÂØÜ„Å´„ÅØ„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞Ë®ÄË™û„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="mt-4 text-sm text-gray-600">
                <p><strong>ÂïèÈ°å„Çø„Ç§„Éó:</strong> singleÔºàÊäû‰∏ÄÈÅ∏ÊäûÔºâ, multipleÔºàË§áÊï∞ÈÅ∏ÊäûÔºâ, truefalseÔºà‚óã√óÂïèÈ°åÔºâ</p>
                <p><strong>ÈÅ∏ÊäûËÇ¢:</strong> „Ç´„É≥„ÉûÂå∫Âàá„Çä„ÅßÂÖ•ÂäõÔºà‰æã: ÈÅ∏ÊäûËÇ¢1,ÈÅ∏ÊäûËÇ¢2,ÈÅ∏ÊäûËÇ¢3Ôºâ</p>
                <p><strong>Ê≠£Ëß£:</strong> Ë§áÊï∞ÈÅ∏Êäû„ÅÆÂ†¥Âêà„ÅØ„Ç´„É≥„ÉûÂå∫Âàá„ÇäÔºà‰æã: Ê≠£Ëß£1,Ê≠£Ëß£2Ôºâ</p>
            </div>
        </div>

        <!-- „ÇØ„Ç§„Ç∫ÁîªÈù¢ -->
        <div id="quizContainer" class="hidden">
            <!-- „Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº„Å®„Çø„Ç§„Éû„Éº -->
            <div class="canva-card rounded-3xl p-6 mb-6">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm font-medium text-gray-600">ÈÄ≤Êçó</span>
                    <div class="flex items-center space-x-4">
                        <span id="progressText" class="text-sm font-medium text-gray-600">1 / 10</span>
                        <div id="timerDisplay" class="hidden flex items-center text-sm font-medium text-orange-600">
                            <span class="mr-1">‚è±Ô∏è</span>
                            <span id="timeRemaining">10:00</span>
                        </div>
                    </div>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-3">
                    <div id="progressBar" class="progress-bar h-3 rounded-full" style="width: 10%"></div>
                </div>
            </div>

            <!-- ÂïèÈ°å„Ç´„Éº„Éâ -->
            <div class="quiz-card rounded-2xl p-8 text-white mb-6">
                <div class="text-center">
                    <div id="questionNumber" class="text-lg font-medium mb-4 opacity-90">ÂïèÈ°å 1</div>
                    <h2 id="questionText" class="text-2xl font-bold mb-6 leading-relaxed">ÂïèÈ°åÊñá„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô</h2>
                    <div class="flex justify-center space-x-3 mb-4">
                        <div id="questionCategory" class="inline-block bg-white bg-opacity-20 px-4 py-2 rounded-full text-sm font-medium">
                            ‰∏ÄËà¨Áü•Ë≠ò
                        </div>
                        <div id="questionDifficulty" class="inline-block bg-white bg-opacity-20 px-4 py-2 rounded-full text-sm font-medium">
                            ÂàùÁ¥ö
                        </div>
                        <div id="questionType" class="inline-block bg-white bg-opacity-20 px-4 py-2 rounded-full text-sm font-medium">
                            Êäû‰∏ÄÈÅ∏Êäû
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÈÅ∏ÊäûËÇ¢ -->
            <div id="optionsContainer" class="space-y-4 mb-8">
                <!-- ÈÅ∏ÊäûËÇ¢„Åå„Åì„Åì„Å´ÂãïÁöÑ„Å´ÁîüÊàê„Åï„Çå„Åæ„Åô -->
            </div>

            <!-- Êìç‰Ωú„Éú„Çø„É≥ -->
            <div class="flex justify-between items-center">
                <button id="prevButton" onclick="previousQuestion()" 
                        class="bg-gray-400 hover:bg-gray-500 text-white px-8 py-4 rounded-2xl font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg">
                    ‚Üê Ââç„ÅÆÂïèÈ°å
                </button>
                <button id="nextButton" onclick="nextQuestion()" 
                        class="canva-button text-white px-8 py-4 rounded-2xl font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg">
                    Ê¨°„ÅÆÂïèÈ°å ‚Üí
                </button>
            </div>
        </div>

        <!-- ÁµêÊûúÁîªÈù¢ -->
        <div id="resultContainer" class="hidden">
            <div class="canva-card rounded-3xl p-8 text-center mb-6">
                <div class="text-6xl mb-4">üéâ</div>
                <h2 class="text-3xl font-bold text-gray-800 mb-4">„ÇØ„Ç§„Ç∫ÂÆå‰∫ÜÔºÅ</h2>
                <div class="text-6xl font-bold text-purple-600 mb-2" id="finalScore">8/10</div>
                <p class="text-gray-600 mb-6">„ÅäÁñ≤„Çå„Åï„Åæ„Åß„Åó„ÅüÔºÅ</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                    <div class="bg-green-50 p-4 rounded-lg">
                        <div class="text-2xl font-bold text-green-600" id="correctCount">8</div>
                        <div class="text-sm text-green-600">Ê≠£Ëß£</div>
                    </div>
                    <div class="bg-red-50 p-4 rounded-lg">
                        <div class="text-2xl font-bold text-red-600" id="incorrectCount">2</div>
                        <div class="text-sm text-red-600">‰∏çÊ≠£Ëß£</div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <div class="text-2xl font-bold text-blue-600" id="accuracyRate">80%</div>
                        <div class="text-sm text-blue-600">Ê≠£Á≠îÁéá</div>
                    </div>
                </div>
                <!-- Áß∞Âè∑Ë°®Á§∫ -->
                <div id="achievementSection" class="hidden mb-8">
                    <div class="bg-gradient-to-r from-yellow-400 to-orange-500 rounded-3xl p-6 text-center text-white shadow-2xl">
                        <div class="text-4xl mb-3">üèÜ</div>
                        <h3 class="text-2xl font-bold mb-2">Áß∞Âè∑Áç≤ÂæóÔºÅ</h3>
                        <div id="achievementTitle" class="text-3xl font-bold mb-2">„Éû„Éº„Ç±„ÉÜ„Ç£„É≥„Ç∞ÈÅìÂ†¥ ÂàùÁ¥ö„Éû„Çπ„Çø„Éº</div>
                        <p id="achievementDescription" class="text-lg opacity-90">ÂàùÁ¥ö„É¨„Éô„É´„ÅÆÂïèÈ°å„ÇíÂÖ®ÂïèÊ≠£Ëß£„Åó„Åæ„Åó„ÅüÔºÅ</p>
                    </div>
                </div>
                
                <div class="flex justify-center space-x-4">
                    <button onclick="showDetailedResults()" 
                            class="canva-button text-white px-8 py-4 rounded-2xl font-semibold shadow-lg">
                        üìä Ë©≥Á¥∞ÁµêÊûú„ÇíË¶ã„Çã
                    </button>
                    <button onclick="restartQuiz()" 
                            class="canva-button text-white px-8 py-4 rounded-2xl font-semibold shadow-lg">
                        üîÑ „ÇÇ„ÅÜ‰∏ÄÂ∫¶ÊåëÊà¶
                    </button>
                </div>
            </div>
            
            <!-- Ë©≥Á¥∞ÁµêÊûú -->
            <div id="detailedResults" class="hidden canva-card rounded-3xl p-6">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">üìä ÂïèÈ°åÂà•Ë©≥Á¥∞ÁµêÊûú</h3>
                <div id="detailedResultsList" class="space-y-4">
                    <!-- Ë©≥Á¥∞ÁµêÊûú„Åå„Åì„Åì„Å´ÂãïÁöÑ„Å´ÁîüÊàê„Åï„Çå„Åæ„Åô -->
                </div>
                <div class="text-center mt-6">
                    <button onclick="hideDetailedResults()" 
                            class="bg-gray-400 hover:bg-gray-500 text-white px-8 py-4 rounded-2xl font-semibold transition-all shadow-lg">
                        ‚Üê Êàª„Çã
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let questions = [];
        let originalQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let selectedAnswers = new Set();
        let timerInterval = null;
        let timeRemaining = 0;
        let quizStartTime = null;

        // ÊñáÂ≠ó„ÅÆÊ≠£Ë¶èÂåñÈñ¢Êï∞Ôºà‚óã√ó„ÅÆÊñáÂ≠óÂåñ„Åë„ÇíÈò≤„ÅêÔºâ
        function normalizeText(text) {
            return text.trim()
                .replace(/‚óã/g, '‚óã')  // ÂÖ®Ëßí‚óã„Å´Áµ±‰∏Ä
                .replace(/√ó/g, '√ó')  // ÂÖ®Ëßí√ó„Å´Áµ±‰∏Ä
                .replace(/‚óØ/g, '‚óã')  // ‚óØ„Çí‚óã„Å´Â§âÊèõ
                .replace(/‚úï/g, '√ó')  // ‚úï„Çí√ó„Å´Â§âÊèõ
                .replace(/\s+/g, ' '); // Ë§áÊï∞„ÅÆÁ©∫ÁôΩ„Çí1„Å§„Å´
        }

        // „É¶„Éº„Ç∂„ÉºÁÆ°ÁêÜ
        let currentUser = null;
        
        // „Éá„É¢Áî®„É¶„Éº„Ç∂„Éº„Éá„Éº„Çø
        const demoUsers = {
            'demo@free.com': { name: '„Éï„É™„Éº„É¶„Éº„Ç∂„Éº', plan: 'free', password: 'password123' },
            'demo@premium.com': { name: '„Éó„É¨„Éü„Ç¢„É†„É¶„Éº„Ç∂„Éº', plan: 'premium', password: 'password123' }
        };

        // „Çµ„É≥„Éó„É´„Éá„Éº„Çø
        const sampleQuestions = [
            {
                question: "Êó•Êú¨„ÅÆÈ¶ñÈÉΩ„ÅØ„Å©„Åì„Åß„Åô„ÅãÔºü",
                type: "single",
                options: ["Êù±‰∫¨", "Â§ßÈò™", "‰∫¨ÈÉΩ", "ÂêçÂè§Â±ã"],
                correct: ["Êù±‰∫¨"],
                category: "‰∏ÄËà¨Áü•Ë≠ò",
                difficulty: "ÂàùÁ¥ö",
                explanation: "Êó•Êú¨„ÅÆÈ¶ñÈÉΩ„ÅØÊù±‰∫¨„Åß„Åô„ÄÇ1868Âπ¥„ÅÆÊòéÊ≤ªÁ∂≠Êñ∞‰ª•Èôç„ÄÅÊîøÊ≤ª„ÉªÁµåÊ∏à„ÅÆ‰∏≠ÂøÉÂú∞„Å®„Åó„Å¶Áô∫Â±ï„Åó„Å¶„Åç„Åæ„Åó„Åü„ÄÇ"
            },
            {
                question: "Âú∞ÁêÉ„ÅØ‰∏∏„ÅÑÂΩ¢„Çí„Åó„Å¶„ÅÑ„Çã",
                type: "truefalse",
                options: ["‚óã", "√ó"],
                correct: ["‚óã"],
                category: "ÁßëÂ≠¶",
                difficulty: "ÂàùÁ¥ö",
                explanation: "Âú∞ÁêÉ„ÅØÁêÉ‰ΩìÔºàÂé≥ÂØÜ„Å´„ÅØÂõûËª¢Ê•ïÂÜÜ‰ΩìÔºâ„ÅÆÂΩ¢„Çí„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÂè§‰ª£„ÇÆ„É™„Ç∑„É£ÊôÇ‰ª£„Åã„ÇâÁü•„Çâ„Çå„Å¶„ÅÑ„Åü‰∫ãÂÆü„Åß„Åô„ÄÇ"
            },
            {
                question: "‰ª•‰∏ã„ÅÆ„ÅÜ„Å°„ÄÅ„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞Ë®ÄË™û„ÅØ„Å©„Çå„Åß„Åô„ÅãÔºüÔºàË§áÊï∞ÈÅ∏ÊäûÂèØÔºâ",
                type: "multiple",
                options: ["JavaScript", "Python", "HTML", "CSS"],
                correct: ["JavaScript", "Python"],
                category: "IT",
                difficulty: "‰∏≠Á¥ö",
                explanation: "JavaScript„Å®Python„ÅØ„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞Ë®ÄË™û„Åß„Åô„ÄÇHTML„ÅØ„Éû„Éº„ÇØ„Ç¢„ÉÉ„ÉóË®ÄË™û„ÄÅCSS„ÅØ„Çπ„Çø„Ç§„É´„Ç∑„Éº„ÉàË®ÄË™û„Åß„ÄÅÂé≥ÂØÜ„Å´„ÅØ„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞Ë®ÄË™û„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"
            },
            {
                question: "1 + 1 = 2„Åß„ÅÇ„Çã",
                type: "truefalse",
                options: ["‚óã", "√ó"],
                correct: ["‚óã"],
                category: "Êï∞Â≠¶",
                difficulty: "ÂàùÁ¥ö",
                explanation: "Âü∫Êú¨ÁöÑ„Å™ÁÆóÊï∞„ÅÆÂïèÈ°å„Åß„Åô„ÄÇ1„Å´1„ÇíË∂≥„Åô„Å®2„Å´„Å™„Çä„Åæ„Åô„ÄÇ"
            },
            {
                question: "ÂØåÂ£´Â±±„ÅÆÊ®ôÈ´ò„ÅØÁ¥Ñ‰Ωï„É°„Éº„Éà„É´„Åß„Åô„ÅãÔºü",
                type: "single",
                options: ["2,776m", "3,776m", "4,776m", "5,776m"],
                correct: ["3,776m"],
                category: "‰∏ÄËà¨Áü•Ë≠ò",
                difficulty: "‰∏≠Á¥ö",
                explanation: "ÂØåÂ£´Â±±„ÅÆÊ®ôÈ´ò„ÅØ3,776m„Åß„Åô„ÄÇÊó•Êú¨ÊúÄÈ´òÂ≥∞„ÅÆÂ±±„Å®„Åó„Å¶Áü•„Çâ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ"
            },
            {
                question: "„Ç™„É™„É≥„Éî„ÉÉ„ÇØ„ÅØ‰ΩïÂπ¥„Å´‰∏ÄÂ∫¶ÈñãÂÇ¨„Åï„Çå„Åæ„Åô„ÅãÔºü",
                type: "single",
                options: ["2Âπ¥", "3Âπ¥", "4Âπ¥", "5Âπ¥"],
                correct: ["4Âπ¥"],
                category: "„Çπ„Éù„Éº„ÉÑ",
                difficulty: "ÂàùÁ¥ö",
                explanation: "„Ç™„É™„É≥„Éî„ÉÉ„ÇØ„ÅØ4Âπ¥„Å´‰∏ÄÂ∫¶ÈñãÂÇ¨„Åï„Çå„Åæ„Åô„ÄÇÂ§èÂ≠£„Å®ÂÜ¨Â≠£„Åå„ÅÇ„Çä„ÄÅ„Åù„Çå„Åû„Çå4Âπ¥Âë®Êúü„ÅßÈñãÂÇ¨„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ"
            },
            {
                question: "Ê∞¥„ÅÆÂåñÂ≠¶Âºè„ÅØH2O„Åß„ÅÇ„Çã",
                type: "truefalse",
                options: ["‚óã", "√ó"],
                correct: ["‚óã"],
                category: "ÁßëÂ≠¶",
                difficulty: "‰∏≠Á¥ö",
                explanation: "Ê∞¥„ÅÆÂåñÂ≠¶Âºè„ÅØH2O„Åß„Åô„ÄÇÊ∞¥Á¥†ÂéüÂ≠ê2ÂÄã„Å®ÈÖ∏Á¥†ÂéüÂ≠ê1ÂÄã„Åã„ÇâÊßãÊàê„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ"
            },
            {
                question: "‰ª•‰∏ã„ÅÆ„ÅÜ„Å°„ÄÅÁêÉÊäÄ„ÅØ„Å©„Çå„Åß„Åô„ÅãÔºüÔºàË§áÊï∞ÈÅ∏ÊäûÂèØÔºâ",
                type: "multiple",
                options: ["„Çµ„ÉÉ„Ç´„Éº", "ÈáéÁêÉ", "Èô∏‰∏ä", "Ê∞¥Ê≥≥"],
                correct: ["„Çµ„ÉÉ„Ç´„Éº", "ÈáéÁêÉ"],
                category: "„Çπ„Éù„Éº„ÉÑ",
                difficulty: "ÂàùÁ¥ö",
                explanation: "„Çµ„ÉÉ„Ç´„Éº„Å®ÈáéÁêÉ„ÅØÁêÉÊäÄ„Åß„Åô„ÄÇÈô∏‰∏ä„ÅØËµ∞„Çã„ÉªË∑≥„Å∂„ÉªÊäï„Åí„Çã„Å™„Å©„ÅÆÁ´∂ÊäÄ„ÄÅÊ∞¥Ê≥≥„ÅØÊ≥≥„ÅêÁ´∂ÊäÄ„Åß„ÄÅÁêÉÊäÄ„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"
            },
            {
                question: "ÈáèÂ≠êÂäõÂ≠¶„ÅÆ‰∏çÁ¢∫ÂÆöÊÄßÂéüÁêÜ„ÇíÊèêÂî±„Åó„Åü„ÅÆ„ÅØË™∞„Åß„Åô„ÅãÔºü",
                type: "single",
                options: ["„Ç¢„Ç§„É≥„Ç∑„É•„Çø„Ç§„É≥", "„Éè„Ç§„Çº„É≥„Éô„É´„ÇØ", "„Ç∑„É•„É¨„Éº„Éá„Ç£„É≥„Ç¨„Éº", "„Éú„Éº„Ç¢"],
                correct: ["„Éè„Ç§„Çº„É≥„Éô„É´„ÇØ"],
                category: "ÁßëÂ≠¶",
                difficulty: "‰∏äÁ¥ö",
                explanation: "‰∏çÁ¢∫ÂÆöÊÄßÂéüÁêÜ„ÅØ„É¥„Çß„É´„Éä„Éº„Éª„Éè„Ç§„Çº„É≥„Éô„É´„ÇØ„Åå1927Âπ¥„Å´ÊèêÂî±„Åó„Åæ„Åó„Åü„ÄÇÁ≤íÂ≠ê„ÅÆ‰ΩçÁΩÆ„Å®ÈÅãÂãïÈáè„ÇíÂêåÊôÇ„Å´Ê≠£Á¢∫„Å´Ê∏¨ÂÆö„Åô„Çã„Åì„Å®„ÅØ„Åß„Åç„Å™„ÅÑ„Å®„ÅÑ„ÅÜÂéüÁêÜ„Åß„Åô„ÄÇ"
            },
            {
                question: "Ê©üÊ¢∞Â≠¶Áøí„ÅÆ„Ç¢„É´„Ç¥„É™„Ç∫„É†„ÅØ„Å©„Çå„Åß„Åô„ÅãÔºüÔºàË§áÊï∞ÈÅ∏ÊäûÂèØÔºâ",
                type: "multiple",
                options: ["„Éã„É•„Éº„É©„É´„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ", "Ê±∫ÂÆöÊú®", "HTML", "„É©„É≥„ÉÄ„É†„Éï„Ç©„É¨„Çπ„Éà"],
                correct: ["„Éã„É•„Éº„É©„É´„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ", "Ê±∫ÂÆöÊú®", "„É©„É≥„ÉÄ„É†„Éï„Ç©„É¨„Çπ„Éà"],
                category: "IT",
                difficulty: "‰∏äÁ¥ö",
                explanation: "„Éã„É•„Éº„É©„É´„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÄÅÊ±∫ÂÆöÊú®„ÄÅ„É©„É≥„ÉÄ„É†„Éï„Ç©„É¨„Çπ„Éà„ÅØÊ©üÊ¢∞Â≠¶Áøí„ÅÆ„Ç¢„É´„Ç¥„É™„Ç∫„É†„Åß„Åô„ÄÇHTML„ÅØWeb„Éö„Éº„Ç∏„Çí‰ΩúÊàê„Åô„Çã„Éû„Éº„ÇØ„Ç¢„ÉÉ„ÉóË®ÄË™û„Åß„ÄÅÊ©üÊ¢∞Â≠¶Áøí„Å®„ÅØÈñ¢‰øÇ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"
            }
        ];

        // „É≠„Ç∞„Ç§„É≥Ê©üËÉΩ
        function showLogin() {
            document.getElementById('registerContainer').classList.add('hidden');
            document.getElementById('loginContainer').classList.remove('hidden');
        }

        function showRegister() {
            document.getElementById('loginContainer').classList.add('hidden');
            document.getElementById('registerContainer').classList.remove('hidden');
        }

        function login() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„Å®„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            // „Éá„É¢Áî®Ë™çË®º
            if (demoUsers[email] && demoUsers[email].password === password) {
                currentUser = {
                    email: email,
                    name: demoUsers[email].name,
                    plan: demoUsers[email].plan
                };
                showMainApp();
            } else {
                alert('„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„Åæ„Åü„ÅØ„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÈñìÈÅï„Å£„Å¶„ÅÑ„Åæ„Åô');
            }
        }

        function register() {
            const name = document.getElementById('registerName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            
            if (!name || !email || !password) {
                alert('„Åô„Åπ„Å¶„ÅÆÈ†ÖÁõÆ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            // Á∞°Âçò„Å™„Éê„É™„Éá„Éº„Ç∑„Éß„É≥
            if (!email.includes('@')) {
                alert('ÊúâÂäπ„Å™„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            if (password.length < 6) {
                alert('„Éë„Çπ„ÉØ„Éº„Éâ„ÅØ6ÊñáÂ≠ó‰ª•‰∏ä„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            // Êñ∞Ë¶è„É¶„Éº„Ç∂„Éº‰ΩúÊàêÔºà„Éá„É¢ÁâàÔºâ
            currentUser = {
                email: email,
                name: name,
                plan: 'free'
            };
            
            alert('ÁôªÈå≤„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅ');
            showMainApp();
        }

        function loginAsGuest() {
            currentUser = {
                email: 'guest@example.com',
                name: '„Ç≤„Çπ„Éà„É¶„Éº„Ç∂„Éº',
                plan: 'free'
            };
            showMainApp();
        }

        function logout() {
            currentUser = null;
            document.getElementById('mainHeader').classList.add('hidden');
            document.getElementById('setupPanel').classList.add('hidden');
            document.getElementById('quizContainer').classList.add('hidden');
            document.getElementById('resultContainer').classList.add('hidden');
            document.getElementById('loginContainer').classList.remove('hidden');
            
            // „Éï„Ç©„Éº„É†„Çí„É™„Çª„ÉÉ„Éà
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
        }

        function showMainApp() {
            document.getElementById('loginContainer').classList.add('hidden');
            document.getElementById('registerContainer').classList.add('hidden');
            document.getElementById('mainHeader').classList.remove('hidden');
            document.getElementById('setupPanel').classList.remove('hidden');
            
            // „É¶„Éº„Ç∂„ÉºÊÉÖÂ†±„ÇíË°®Á§∫
            document.getElementById('userNameDisplay').textContent = currentUser.name;
            
            const planDisplay = document.getElementById('userPlanDisplay');
            const upgradeButton = document.getElementById('upgradeButton');
            
            if (currentUser.plan === 'premium') {
                planDisplay.textContent = '„Éó„É¨„Éü„Ç¢„É†„Éó„É©„É≥';
                planDisplay.className = 'text-sm px-3 py-1 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white';
                upgradeButton.classList.add('hidden');
            } else {
                planDisplay.textContent = 'ÁÑ°Êñô„Éó„É©„É≥';
                planDisplay.className = 'text-sm px-3 py-1 rounded-full bg-blue-100 text-blue-600';
                upgradeButton.classList.remove('hidden');
            }
        }

        function showUpgradeModal() {
            document.getElementById('upgradeModal').classList.remove('hidden');
        }

        function closeUpgradeModal() {
            document.getElementById('upgradeModal').classList.add('hidden');
        }

        function upgradeToPremium() {
            // „Éá„É¢Áâà„Åß„ÅØÂç≥Â∫ß„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ
            currentUser.plan = 'premium';
            alert('„Éó„É¨„Éü„Ç¢„É†„Éó„É©„É≥„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„Åó„Åæ„Åó„ÅüÔºÅ\n‰∏≠Á¥ö„Éª‰∏äÁ¥öÂïèÈ°å„Å´„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åó„Åü„ÄÇ');
            closeUpgradeModal();
            showMainApp();
        }

        function loadSampleData() {
            originalQuestions = [...sampleQuestions];
            const validation = validateQuestions(originalQuestions);
            showValidationResults(validation);
            
            if (validation.isValid) {
                updateCategoryOptions();
                questions = [...originalQuestions];
                document.getElementById('startQuizSection').classList.remove('hidden');
            }
        }

        function updateCategoryOptions() {
            const categorySelect = document.getElementById('categorySelect');
            const difficultySelect = document.getElementById('difficultySelect');
            
            const categories = [...new Set(originalQuestions.map(q => q.category || 'Êú™ÂàÜÈ°û'))].sort();
            const difficulties = [...new Set(originalQuestions.map(q => q.difficulty || 'Êú™Ë®≠ÂÆö'))].sort();
            
            // Â§âÊõ¥ÊôÇ„ÅÆ„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
            categorySelect.onchange = updateDropdownOptions;
            difficultySelect.onchange = updateDropdownOptions;
            
            // ÂàùÊúüË°®Á§∫
            updateDropdownOptions();
        }

        function updateDropdownOptions() {
            const categorySelect = document.getElementById('categorySelect');
            const difficultySelect = document.getElementById('difficultySelect');
            
            const selectedCategory = categorySelect.value;
            const selectedDifficulty = difficultySelect.value;
            
            const categories = [...new Set(originalQuestions.map(q => q.category || 'Êú™ÂàÜÈ°û'))].sort();
            const difficulties = [...new Set(originalQuestions.map(q => q.difficulty || 'Êú™Ë®≠ÂÆö'))].sort();
            
            // ÁèæÂú®„ÅÆÈÅ∏Êäû„Çí‰øùÊåÅ
            const currentCategoryValue = selectedCategory;
            const currentDifficultyValue = selectedDifficulty;
            
            // „Ç´„ÉÜ„Ç¥„É™ÈÅ∏ÊäûËÇ¢„ÇíÂÜçÊßãÁØâ
            categorySelect.innerHTML = '';
            
            // „Äå„Åô„Åπ„Å¶„ÅÆ„Ç´„ÉÜ„Ç¥„É™„Äç„ÅÆÂïèÈ°åÊï∞„ÇíË®àÁÆó
            let allCategoryCount = originalQuestions;
            if (selectedDifficulty !== 'all') {
                allCategoryCount = allCategoryCount.filter(q => (q.difficulty || 'Êú™Ë®≠ÂÆö') === selectedDifficulty);
            }
            
            const allCategoryOption = document.createElement('option');
            allCategoryOption.value = 'all';
            allCategoryOption.textContent = `„Åô„Åπ„Å¶„ÅÆ„Ç´„ÉÜ„Ç¥„É™ (${allCategoryCount.length}Âïè)`;
            categorySelect.appendChild(allCategoryOption);
            
            // ÂêÑ„Ç´„ÉÜ„Ç¥„É™„ÅÆÂïèÈ°åÊï∞„ÇíË®àÁÆóÔºàÈõ£ÊòìÂ∫¶„Éï„Ç£„É´„ÇøÈÅ©Áî®Ôºâ
            categories.forEach(category => {
                let categoryQuestions = originalQuestions.filter(q => (q.category || 'Êú™ÂàÜÈ°û') === category);
                if (selectedDifficulty !== 'all') {
                    categoryQuestions = categoryQuestions.filter(q => (q.difficulty || 'Êú™Ë®≠ÂÆö') === selectedDifficulty);
                }
                
                const option = document.createElement('option');
                option.value = category;
                option.textContent = `${category} (${categoryQuestions.length}Âïè)`;
                categorySelect.appendChild(option);
            });
            
            // Èõ£ÊòìÂ∫¶ÈÅ∏ÊäûËÇ¢„ÇíÂÜçÊßãÁØâ
            difficultySelect.innerHTML = '';
            
            // „Äå„Åô„Åπ„Å¶„ÅÆÈõ£ÊòìÂ∫¶„Äç„ÅÆÂïèÈ°åÊï∞„ÇíË®àÁÆó
            let allDifficultyCount = originalQuestions;
            if (selectedCategory !== 'all') {
                allDifficultyCount = allDifficultyCount.filter(q => (q.category || 'Êú™ÂàÜÈ°û') === selectedCategory);
            }
            
            const allDifficultyOption = document.createElement('option');
            allDifficultyOption.value = 'all';
            allDifficultyOption.textContent = `„Åô„Åπ„Å¶„ÅÆÈõ£ÊòìÂ∫¶ (${allDifficultyCount.length}Âïè)`;
            difficultySelect.appendChild(allDifficultyOption);
            
            // ÂêÑÈõ£ÊòìÂ∫¶„ÅÆÂïèÈ°åÊï∞„ÇíË®àÁÆóÔºà„Ç´„ÉÜ„Ç¥„É™„Éï„Ç£„É´„ÇøÈÅ©Áî®Ôºâ
            difficulties.forEach(difficulty => {
                let difficultyQuestions = originalQuestions.filter(q => (q.difficulty || 'Êú™Ë®≠ÂÆö') === difficulty);
                if (selectedCategory !== 'all') {
                    difficultyQuestions = difficultyQuestions.filter(q => (q.category || 'Êú™ÂàÜÈ°û') === selectedCategory);
                }
                
                const option = document.createElement('option');
                option.value = difficulty;
                option.textContent = `${difficulty} (${difficultyQuestions.length}Âïè)`;
                difficultySelect.appendChild(option);
            });
            
            // ÈÅ∏ÊäûÁä∂ÊÖã„ÇíÂæ©ÂÖÉ
            categorySelect.value = currentCategoryValue;
            difficultySelect.value = currentDifficultyValue;
            
            // ÊúÄÁµÇÁöÑ„Å™„Éï„Ç£„É´„ÇøÁµêÊûú„ÇíË®àÁÆó
            let filteredQuestions = originalQuestions;
            if (selectedCategory !== 'all') {
                filteredQuestions = filteredQuestions.filter(q => (q.category || 'Êú™ÂàÜÈ°û') === selectedCategory);
            }
            if (selectedDifficulty !== 'all') {
                filteredQuestions = filteredQuestions.filter(q => (q.difficulty || 'Êú™Ë®≠ÂÆö') === selectedDifficulty);
            }
            
            // Ë°®Á§∫„ÇíÊõ¥Êñ∞
            document.getElementById('categoryCount').textContent = filteredQuestions.length;
            document.getElementById('difficultyCount').textContent = filteredQuestions.length;
        }
        


        function validateQuestions(questionsToValidate) {
            const errors = [];
            const warnings = [];
            let validCount = 0;

            questionsToValidate.forEach((q, index) => {
                const questionNum = index + 1;
                
                // ÂøÖÈ†à„Éï„Ç£„Éº„É´„Éâ„ÉÅ„Çß„ÉÉ„ÇØ
                if (!q.question || q.question.trim() === '') {
                    errors.push(`ÂïèÈ°å${questionNum}: ÂïèÈ°åÊñá„ÅåÁ©∫„Åß„Åô`);
                }
                if (!q.type || !['single', 'multiple', 'truefalse'].includes(q.type)) {
                    errors.push(`ÂïèÈ°å${questionNum}: ÂïèÈ°å„Çø„Ç§„Éó„ÅåÁÑ°Âäπ„Åß„Åô (single, multiple, truefalse „ÅÆ„ÅÑ„Åö„Çå„Åã„ÇíÊåáÂÆö)`);
                }
                if (!q.options || q.options.length === 0) {
                    errors.push(`ÂïèÈ°å${questionNum}: ÈÅ∏ÊäûËÇ¢„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì`);
                }
                if (!q.correct || q.correct.length === 0) {
                    errors.push(`ÂïèÈ°å${questionNum}: Ê≠£Ëß£„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì`);
                }

                // ÈÅ∏ÊäûËÇ¢„Å®Ê≠£Ëß£„ÅÆÊï¥ÂêàÊÄß„ÉÅ„Çß„ÉÉ„ÇØÔºàÊñáÂ≠ó„ÅÆÊ≠£Ë¶èÂåñÂØæÂøúÔºâ
                if (q.options && q.correct) {
                    q.correct.forEach(correctAnswer => {
                        const normalizedCorrect = normalizeText(correctAnswer);
                        const hasMatch = q.options.some(option => normalizeText(option) === normalizedCorrect);
                        
                        if (!hasMatch) {
                            errors.push(`ÂïèÈ°å${questionNum}: Ê≠£Ëß£„Äå${correctAnswer}„Äç„ÅåÈÅ∏ÊäûËÇ¢„Å´Âê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì`);
                        }
                    });
                }

                // ÂïèÈ°å„Çø„Ç§„ÉóÂà•„ÉÅ„Çß„ÉÉ„ÇØ
                if (q.type === 'truefalse' && q.options && q.options.length !== 2) {
                    warnings.push(`ÂïèÈ°å${questionNum}: ‚óã√óÂïèÈ°å„ÅØÈÅ∏ÊäûËÇ¢„Åå2„Å§„Åß„ÅÇ„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô`);
                }
                if (q.type === 'single' && q.correct && q.correct.length > 1) {
                    warnings.push(`ÂïèÈ°å${questionNum}: Êäû‰∏ÄÈÅ∏ÊäûÂïèÈ°å„ÅÆÊ≠£Ëß£„ÅØ1„Å§„Åß„ÅÇ„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô`);
                }

                if (errors.length === 0) validCount++;
            });

            return {
                isValid: errors.length === 0,
                totalQuestions: questionsToValidate.length,
                validQuestions: validCount,
                errors: errors,
                warnings: warnings
            };
        }

        function showValidationResults(validation) {
            const container = document.getElementById('validationResults');
            container.innerHTML = '';
            
            if (validation.errors.length === 0 && validation.warnings.length === 0) {
                container.innerHTML = `
                    <div class="p-4 bg-green-50 border border-green-200 rounded-lg">
                        <div class="flex items-center">
                            <span class="text-green-600 mr-2">‚úÖ</span>
                            <span class="text-green-700 font-medium">„Éá„Éº„ÇøÊ§úË®ºÂÆå‰∫Ü: ${validation.totalQuestions}Âïè„Åô„Åπ„Å¶Ê≠£Â∏∏„Åß„Åô</span>
                        </div>
                    </div>
                `;
            } else {
                let html = '<div class="space-y-3">';
                
                if (validation.errors.length > 0) {
                    html += `
                        <div class="p-4 bg-red-50 border border-red-200 rounded-lg">
                            <div class="font-medium text-red-800 mb-2">‚ùå „Ç®„É©„Éº (${validation.errors.length}‰ª∂)</div>
                            <ul class="text-sm text-red-700 space-y-1">
                                ${validation.errors.map(error => `<li>‚Ä¢ ${error}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
                
                if (validation.warnings.length > 0) {
                    html += `
                        <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <div class="font-medium text-yellow-800 mb-2">‚ö†Ô∏è Ë≠¶Âëä (${validation.warnings.length}‰ª∂)</div>
                            <ul class="text-sm text-yellow-700 space-y-1">
                                ${validation.warnings.map(warning => `<li>‚Ä¢ ${warning}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
                
                html += '</div>';
                container.innerHTML = html;
            }
            
            container.classList.remove('hidden');
        }

        async function loadFromSpreadsheet() {
            const url = document.getElementById('spreadsheetUrl').value.trim();
            if (!url) {
                alert('„Çπ„Éó„É¨„ÉÉ„Éâ„Ç∑„Éº„Éà„ÅÆURL„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }

            try {
                // „Çπ„Éó„É¨„ÉÉ„Éâ„Ç∑„Éº„ÉàID„ÇíÊäΩÂá∫
                const sheetId = extractSheetId(url);
                if (!sheetId) {
                    throw new Error('ÁÑ°Âäπ„Å™„Çπ„Éó„É¨„ÉÉ„Éâ„Ç∑„Éº„ÉàURL„Åß„Åô');
                }
                
                // CSVÂΩ¢Âºè„Åß„Éá„Éº„Çø„ÇíÂèñÂæóÔºàÂÖ¨ÈñãË®≠ÂÆö„ÅåÂøÖË¶ÅÔºâ
                const csvUrl = `https://docs.google.com/spreadsheets/d/${sheetId}/export?format=csv&gid=0`;
                
                document.getElementById('loadingMessage').classList.remove('hidden');
                
                const response = await fetch(csvUrl);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const csvText = await response.text();
                const parsedQuestions = parseCSV(csvText);
                
                if (parsedQuestions.length === 0) {
                    throw new Error('ÂïèÈ°å„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü');
                }
                
                originalQuestions = parsedQuestions;
                const validation = validateQuestions(originalQuestions);
                showValidationResults(validation);
                
                document.getElementById('loadingMessage').classList.add('hidden');
                
                if (validation.isValid) {
                    updateCategoryOptions();
                    questions = [...originalQuestions];
                    document.getElementById('startQuizSection').classList.remove('hidden');
                    alert(`${questions.length}Âïè„ÅÆÂïèÈ°å„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„ÅüÔºÅ„Ç´„ÉÜ„Ç¥„É™„ÇíÈÅ∏Êäû„Åó„Å¶„ÇØ„Ç§„Ç∫„ÇíÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ`);
                } else {
                    alert(`„Éá„Éº„Çø„Å´„Ç®„É©„Éº„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ${validation.errors.length}‰ª∂„ÅÆ„Ç®„É©„Éº„Çí‰øÆÊ≠£„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ`);
                }
                
            } catch (error) {
                document.getElementById('loadingMessage').classList.add('hidden');
                console.error('„Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü:', error);
                alert(`„Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü: ${error.message}\n\nÁ¢∫Ë™ç‰∫ãÈ†Ö:\n1. „Çπ„Éó„É¨„ÉÉ„Éâ„Ç∑„Éº„Éà„Åå„Äå„É™„É≥„ÇØ„ÇíÁü•„Å£„Å¶„ÅÑ„ÇãÂÖ®Âì°„ÅåÈñ≤Ë¶ßÂèØËÉΩ„Äç„Å´Ë®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Çã„Åã\n2. URL„ÅåÊ≠£„Åó„ÅÑ„Åã\n3. „Éá„Éº„Çø„ÅåÊ≠£„Åó„ÅÑÂΩ¢Âºè„ÅßÂÖ•Âäõ„Åï„Çå„Å¶„ÅÑ„Çã„Åã`);
            }
        }

        function extractSheetId(url) {
            const match = url.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);
            return match ? match[1] : null;
        }

        function parseCSV(csvText) {
            const lines = csvText.split('\n').filter(line => line.trim());
            const questions = [];
            
            // „Éò„ÉÉ„ÉÄ„ÉºË°å„Çí„Çπ„Ç≠„ÉÉ„ÉóÔºà„ÇÇ„Åó„ÅÇ„Çå„Å∞Ôºâ
            const startIndex = lines[0].includes('ÂïèÈ°åÊñá') ? 1 : 0;
            
            for (let i = startIndex; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                
                // CSV„ÅÆË°å„ÇíËß£ÊûêÔºà„Ç´„É≥„ÉûÂå∫Âàá„Çä„ÄÅ„ÉÄ„Éñ„É´„ÇØ„Ç©„Éº„ÉàÂØæÂøúÔºâ
                const columns = parseCSVLine(line);
                
                if (columns.length >= 4) {
                    const [questionText, type, optionsStr, correctStr, categoryStr, difficultyStr, explanationStr] = columns;
                    
                    if (questionText && type && optionsStr && correctStr) {
                        const options = optionsStr.split(',').map(opt => normalizeText(opt));
                        const correct = correctStr.split(',').map(ans => normalizeText(ans));
                        const category = categoryStr ? categoryStr.trim() : 'Êú™ÂàÜÈ°û';
                        const difficulty = difficultyStr ? difficultyStr.trim() : 'Êú™Ë®≠ÂÆö';
                        const explanation = explanationStr ? explanationStr.trim() : '';
                        
                        questions.push({
                            question: questionText.trim(),
                            type: type.trim(),
                            options: options,
                            correct: correct,
                            category: category,
                            difficulty: difficulty,
                            explanation: explanation
                        });
                    }
                }
            }
            
            return questions;
        }

        function parseCSVLine(line) {
            const result = [];
            let current = '';
            let inQuotes = false;
            
            for (let i = 0; i < line.length; i++) {
                const char = line[i];
                
                if (char === '"') {
                    inQuotes = !inQuotes;
                } else if (char === ',' && !inQuotes) {
                    result.push(current);
                    current = '';
                } else {
                    current += char;
                }
            }
            
            result.push(current);
            return result;
        }

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function startQuiz() {
            if (originalQuestions.length === 0) {
                alert('ÂïèÈ°å„Éá„Éº„Çø„ÅåË™≠„ÅøËæº„Åæ„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì');
                return;
            }

            // „Ç´„ÉÜ„Ç¥„É™„Å®Èõ£ÊòìÂ∫¶„Åß„Éï„Ç£„É´„Çø„É™„É≥„Ç∞
            const selectedCategory = document.getElementById('categorySelect').value;
            const selectedDifficulty = document.getElementById('difficultySelect').value;
            let filteredQuestions = [...originalQuestions];
            
            if (selectedCategory !== 'all') {
                filteredQuestions = filteredQuestions.filter(q => (q.category || 'Êú™ÂàÜÈ°û') === selectedCategory);
            }
            
            if (selectedDifficulty !== 'all') {
                filteredQuestions = filteredQuestions.filter(q => (q.difficulty || 'Êú™Ë®≠ÂÆö') === selectedDifficulty);
            }
            
            // „Éó„É©„É≥Âà∂Èôê„ÉÅ„Çß„ÉÉ„ÇØ
            if (currentUser.plan === 'free') {
                const restrictedQuestions = filteredQuestions.filter(q => 
                    (q.difficulty || 'Êú™Ë®≠ÂÆö') === '‰∏≠Á¥ö' || (q.difficulty || 'Êú™Ë®≠ÂÆö') === '‰∏äÁ¥ö'
                );
                
                if (restrictedQuestions.length > 0) {
                    const freeQuestions = filteredQuestions.filter(q => (q.difficulty || 'Êú™Ë®≠ÂÆö') === 'ÂàùÁ¥ö');
                    
                    if (freeQuestions.length === 0) {
                        alert('ÈÅ∏Êäû„Åï„Çå„ÅüÊù°‰ª∂„ÅÆÂïèÈ°å„ÅØ„Éó„É¨„Éü„Ç¢„É†„Éó„É©„É≥ÈôêÂÆö„Åß„Åô„ÄÇ\nÁÑ°Êñô„Éó„É©„É≥„Åß„ÅØÂàùÁ¥öÂïèÈ°å„ÅÆ„Åø„ÅîÂà©Áî®„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ');
                        showUpgradeModal();
                        return;
                    } else {
                        const confirmResult = confirm(
                            `ÈÅ∏Êäû„Åï„Çå„ÅüÊù°‰ª∂„Å´„ÅØ‰∏≠Á¥ö„Éª‰∏äÁ¥öÂïèÈ°å„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ\n` +
                            `ÁÑ°Êñô„Éó„É©„É≥„Åß„ÅØÂàùÁ¥öÂïèÈ°åÔºà${freeQuestions.length}ÂïèÔºâ„ÅÆ„ÅøÂà©Áî®ÂèØËÉΩ„Åß„Åô„ÄÇ\n\n` +
                            `ÂàùÁ¥öÂïèÈ°å„ÅÆ„Åø„Åß„ÇØ„Ç§„Ç∫„ÇíÈñãÂßã„Åó„Åæ„Åô„ÅãÔºü`
                        );
                        
                        if (!confirmResult) {
                            return;
                        }
                        
                        filteredQuestions = freeQuestions;
                    }
                }
            }
            
            if (filteredQuestions.length === 0) {
                alert('ÈÅ∏Êäû„Åï„Çå„Åü„Ç´„ÉÜ„Ç¥„É™„Å´ÂïèÈ°å„Åå„ÅÇ„Çä„Åæ„Åõ„Çì');
                return;
            }

            // „Ç∑„É£„ÉÉ„Éï„É´Ë®≠ÂÆö„ÅÆÁ¢∫Ë™ç
            const shuffleMode = document.getElementById('shuffleMode').value;
            if (shuffleMode === 'shuffle') {
                questions = shuffleArray(filteredQuestions);
            } else {
                questions = [...filteredQuestions];
            }

            // „Çø„Ç§„Éû„ÉºË®≠ÂÆö
            const timeLimitMinutes = parseInt(document.getElementById('timeLimit').value);
            if (timeLimitMinutes > 0) {
                timeRemaining = timeLimitMinutes * 60; // Áßí„Å´Â§âÊèõ
                document.getElementById('timerDisplay').classList.remove('hidden');
                startTimer();
            } else {
                document.getElementById('timerDisplay').classList.add('hidden');
            }

            document.getElementById('setupPanel').classList.add('hidden');
            document.getElementById('quizContainer').classList.remove('hidden');
            
            currentQuestionIndex = 0;
            userAnswers = [];
            selectedAnswers.clear();
            quizStartTime = new Date();
            
            displayQuestion();
        }

        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    alert('ÊôÇÈñìÂàá„Çå„Åß„ÅôÔºÅ„ÇØ„Ç§„Ç∫„ÇíÁµÇ‰∫Ü„Åó„Åæ„Åô„ÄÇ');
                    showResults();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timeRemaining').textContent = display;
            
            // ÊÆã„ÇäÊôÇÈñì„ÅåÂ∞ë„Å™„Åè„Å™„Å£„Åü„ÇâËâ≤„ÇíÂ§âÊõ¥
            const timerElement = document.getElementById('timerDisplay');
            if (timeRemaining <= 60) {
                timerElement.className = timerElement.className.replace('text-orange-600', 'text-red-600');
            } else if (timeRemaining <= 300) {
                timerElement.className = timerElement.className.replace('text-orange-600', 'text-yellow-600');
            }
        }

        function displayQuestion() {
            const question = questions[currentQuestionIndex];
            selectedAnswers.clear();
            
            // ÂïèÈ°åÊÉÖÂ†±„ÅÆÊõ¥Êñ∞
            document.getElementById('questionNumber').textContent = `ÂïèÈ°å ${currentQuestionIndex + 1}`;
            document.getElementById('questionText').textContent = question.question;
            
            // ÂïèÈ°å„Çø„Ç§„Éó„ÄÅ„Ç´„ÉÜ„Ç¥„É™„ÄÅÈõ£ÊòìÂ∫¶„ÅÆË°®Á§∫
            const typeText = {
                'single': 'Êäû‰∏ÄÈÅ∏Êäû',
                'multiple': 'Ë§áÊï∞ÈÅ∏Êäû',
                'truefalse': '‚óã√óÂïèÈ°å'
            };
            document.getElementById('questionType').textContent = typeText[question.type] || 'Êäû‰∏ÄÈÅ∏Êäû';
            document.getElementById('questionCategory').textContent = question.category || 'Êú™ÂàÜÈ°û';
            document.getElementById('questionDifficulty').textContent = question.difficulty || 'Êú™Ë®≠ÂÆö';
            
            // „Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº„ÅÆÊõ¥Êñ∞
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `${currentQuestionIndex + 1} / ${questions.length}`;
            
            // ÈÅ∏ÊäûËÇ¢„ÅÆÁîüÊàê
            const container = document.getElementById('optionsContainer');
            container.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-button w-full bg-white hover:bg-gray-50 text-gray-800 p-4 rounded-lg border-2 border-gray-200 text-left font-medium';
                button.innerHTML = `
                    <div class="flex items-center">
                        <span class="w-8 h-8 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center text-sm font-bold mr-4">
                            ${String.fromCharCode(65 + index)}
                        </span>
                        <span>${option}</span>
                    </div>
                `;
                
                button.onclick = () => selectOption(button, option, question.type);
                container.appendChild(button);
            });
            
            // „Éú„Çø„É≥„ÅÆÁä∂ÊÖãÊõ¥Êñ∞
            document.getElementById('prevButton').disabled = currentQuestionIndex === 0;
            const nextButton = document.getElementById('nextButton');
            nextButton.textContent = currentQuestionIndex === questions.length - 1 ? 'ÁµêÊûú„ÇíË¶ã„Çã' : 'Ê¨°„ÅÆÂïèÈ°å ‚Üí';
            
            // Ë§áÊï∞ÈÅ∏Êäû‰ª•Â§ñ„ÅØÊ¨°„Å∏„Éú„Çø„É≥„ÇíÁÑ°ÂäπÂåñÔºàÂõûÁ≠îÂæå„Å´ÊúâÂäπÂåñÔºâ
            if (question.type === 'single' || question.type === 'truefalse') {
                nextButton.disabled = true;
                nextButton.style.opacity = '0.5';
            } else {
                nextButton.disabled = false;
                nextButton.style.opacity = '1';
            }
        }

        function selectOption(button, option, type) {
            if (type === 'single' || type === 'truefalse') {
                // Âçò‰∏ÄÈÅ∏ÊäûÔºö‰ªñ„ÅÆÈÅ∏Êäû„ÇíËß£Èô§
                document.querySelectorAll('.option-button').forEach(btn => {
                    btn.classList.remove('option-selected');
                });
                
                button.classList.add('option-selected');
                
                selectedAnswers.clear();
                selectedAnswers.add(option);
                
                // Âç≥Â∫ß„Å´Ê≠£Ë™§Âà§ÂÆö„ÇíË°®Á§∫
                showAnswerFeedback(option, type);
                
            } else if (type === 'multiple') {
                // Ë§áÊï∞ÈÅ∏ÊäûÔºö„Éà„Ç∞„É´
                if (selectedAnswers.has(option)) {
                    selectedAnswers.delete(option);
                    button.classList.remove('option-selected');
                } else {
                    selectedAnswers.add(option);
                    button.classList.add('option-selected');
                }
            }
        }

        function showAnswerFeedback(selectedOption, type) {
            const question = questions[currentQuestionIndex];
            const correctAnswers = question.correct;
            
            // Âçò‰∏ÄÈÅ∏Êäû„Éª‚óã√óÂïèÈ°å„ÅÆÂ†¥Âêà„ÅÆ„ÅøÂç≥Â∫ß„Å´„Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ
            if (type === 'single' || type === 'truefalse') {
                const isCorrect = correctAnswers.includes(selectedOption);
                
                // ÂÖ®„Å¶„ÅÆÈÅ∏ÊäûËÇ¢„Å´Ê≠£Ë™§„ÇíË°®Á§∫
                document.querySelectorAll('.option-button').forEach(btn => {
                    const optionText = btn.querySelector('span:last-child').textContent;
                    
                    if (correctAnswers.includes(optionText)) {
                        btn.classList.add('correct');
                        btn.classList.remove('option-button');
                    } else if (optionText === selectedOption && !isCorrect) {
                        btn.classList.add('incorrect');
                        btn.classList.remove('option-button');
                    }
                    
                    // „Éú„Çø„É≥„ÇíÁÑ°ÂäπÂåñ
                    btn.disabled = true;
                    btn.style.pointerEvents = 'none';
                });
                
                // Ëß£Ë™¨„ÇíË°®Á§∫Ôºà„Éó„É¨„Éü„Ç¢„É†„Éó„É©„É≥„ÅÆ„ÅøÔºâ
                if (currentUser.plan === 'premium' && question.explanation) {
                    setTimeout(() => {
                        showExplanation(question.explanation, isCorrect);
                    }, 1000);
                }
                
                // Ê¨°„ÅÆÂïèÈ°å„Éú„Çø„É≥„ÇíÊúâÂäπÂåñ
                setTimeout(() => {
                    document.getElementById('nextButton').disabled = false;
                    document.getElementById('nextButton').style.opacity = '1';
                }, 1500);
            }
        }

        function showExplanation(explanation, isCorrect) {
            // Êó¢Â≠ò„ÅÆËß£Ë™¨„ÇíÂâäÈô§
            const existingExplanation = document.getElementById('explanationCard');
            if (existingExplanation) {
                existingExplanation.remove();
            }
            
            const explanationCard = document.createElement('div');
            explanationCard.id = 'explanationCard';
            explanationCard.className = `mt-6 p-4 rounded-lg border-l-4 ${isCorrect ? 'bg-green-50 border-green-400' : 'bg-blue-50 border-blue-400'}`;
            explanationCard.innerHTML = `
                <div class="flex items-start">
                    <div class="flex-shrink-0 mr-3">
                        <span class="text-2xl">${isCorrect ? '‚úÖ' : 'üí°'}</span>
                    </div>
                    <div>
                        <h4 class="font-semibold ${isCorrect ? 'text-green-800' : 'text-blue-800'} mb-2">
                            ${isCorrect ? 'Ê≠£Ëß£„Åß„ÅôÔºÅ' : 'Ëß£Ë™¨'}
                        </h4>
                        <p class="${isCorrect ? 'text-green-700' : 'text-blue-700'}">${explanation}</p>
                    </div>
                </div>
            `;
            
            document.getElementById('optionsContainer').appendChild(explanationCard);
        }

        function nextQuestion() {
            // ÂõûÁ≠î„Çí‰øùÂ≠ò
            userAnswers[currentQuestionIndex] = Array.from(selectedAnswers);
            
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                showResults();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
                
                // Ââç„ÅÆÂõûÁ≠î„ÇíÂæ©ÂÖÉ
                if (userAnswers[currentQuestionIndex]) {
                    selectedAnswers = new Set(userAnswers[currentQuestionIndex]);
                    
                    document.querySelectorAll('.option-button').forEach(button => {
                        const optionText = button.querySelector('span:last-child').textContent;
                        if (selectedAnswers.has(optionText)) {
                            button.classList.add('option-selected');
                        }
                    });
                }
            }
        }

        function showResults() {
            // „Çø„Ç§„Éû„Éº„ÇíÂÅúÊ≠¢
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            document.getElementById('quizContainer').classList.add('hidden');
            document.getElementById('resultContainer').classList.remove('hidden');
            
            let correctCount = 0;
            
            questions.forEach((question, index) => {
                const userAnswer = userAnswers[index] || [];
                const correctAnswer = question.correct;
                
                // ÈÖçÂàó„ÅÆÂÜÖÂÆπ„ÇíÊØîËºÉ
                const isCorrect = arraysEqual(userAnswer.sort(), correctAnswer.sort());
                if (isCorrect) correctCount++;
            });
            
            const totalQuestions = questions.length;
            const incorrectCount = totalQuestions - correctCount;
            const accuracy = Math.round((correctCount / totalQuestions) * 100);
            
            document.getElementById('finalScore').textContent = `${correctCount}/${totalQuestions}`;
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('incorrectCount').textContent = incorrectCount;
            document.getElementById('accuracyRate').textContent = `${accuracy}%`;
            
            // Áß∞Âè∑„ÉÅ„Çß„ÉÉ„ÇØÔºàÊ∫ÄÁÇπ„ÅÆÂ†¥Âêà„ÅÆ„ÅøÔºâ
            if (correctCount === totalQuestions) {
                checkAndShowAchievement();
            }
        }
        
        function checkAndShowAchievement() {
            const selectedCategory = document.getElementById('categorySelect').value;
            const selectedDifficulty = document.getElementById('difficultySelect').value;
            
            let achievementTitle = '';
            let achievementDescription = '';
            
            // „Ç´„ÉÜ„Ç¥„É™„Å®Èõ£ÊòìÂ∫¶„Å´Âü∫„Å•„ÅÑ„Å¶Áß∞Âè∑„ÇíÊ±∫ÂÆö
            if (selectedCategory !== 'all' && selectedDifficulty !== 'all') {
                // ÁâπÂÆö„ÅÆ„Ç´„ÉÜ„Ç¥„É™„ÉªÈõ£ÊòìÂ∫¶
                achievementTitle = `${selectedCategory} ${selectedDifficulty}„Éû„Çπ„Çø„Éº`;
                achievementDescription = `${selectedCategory}„ÅÆ${selectedDifficulty}„É¨„Éô„É´ÂïèÈ°å„ÇíÂÖ®ÂïèÊ≠£Ëß£„Åó„Åæ„Åó„ÅüÔºÅ`;
            } else if (selectedCategory !== 'all') {
                // ÁâπÂÆö„ÅÆ„Ç´„ÉÜ„Ç¥„É™ÔºàÂÖ®Èõ£ÊòìÂ∫¶Ôºâ
                achievementTitle = `${selectedCategory} „Ç®„Ç≠„Çπ„Éë„Éº„Éà`;
                achievementDescription = `${selectedCategory}„ÅÆÂÖ®Èõ£ÊòìÂ∫¶ÂïèÈ°å„ÇíÂà∂Ë¶á„Åó„Åæ„Åó„ÅüÔºÅ`;
            } else if (selectedDifficulty !== 'all') {
                // ÁâπÂÆö„ÅÆÈõ£ÊòìÂ∫¶ÔºàÂÖ®„Ç´„ÉÜ„Ç¥„É™Ôºâ
                achievementTitle = `${selectedDifficulty} „ÉÅ„É£„É≥„Éî„Ç™„É≥`;
                achievementDescription = `${selectedDifficulty}„É¨„Éô„É´„ÅÆÂÖ®„Ç´„ÉÜ„Ç¥„É™ÂïèÈ°å„ÇíÂà∂Ë¶á„Åó„Åæ„Åó„ÅüÔºÅ`;
            } else {
                // ÂÖ®ÂïèÈ°å
                achievementTitle = '„Ç∞„É©„É≥„Éâ„Éû„Çπ„Çø„Éº';
                achievementDescription = '„Åô„Åπ„Å¶„ÅÆÂïèÈ°å„ÇíÂÆåÁíß„Å´Ëß£Á≠î„Åó„Åæ„Åó„ÅüÔºÅÁúü„ÅÆÈÅìÂ†¥„Éû„Çπ„Çø„Éº„Åß„ÅôÔºÅ';
            }
            
            // Áß∞Âè∑Ë°®Á§∫
            document.getElementById('achievementTitle').textContent = achievementTitle;
            document.getElementById('achievementDescription').textContent = achievementDescription;
            document.getElementById('achievementSection').classList.remove('hidden');
        }

        function showDetailedResults() {
            document.getElementById('detailedResults').classList.remove('hidden');
            const container = document.getElementById('detailedResultsList');
            container.innerHTML = '';
            
            questions.forEach((question, index) => {
                const userAnswer = userAnswers[index] || [];
                const correctAnswer = question.correct;
                const isCorrect = arraysEqual(userAnswer.sort(), correctAnswer.sort());
                
                const resultCard = document.createElement('div');
                resultCard.className = `border rounded-lg p-4 ${isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`;
                
                const typeText = {
                    'single': 'Êäû‰∏ÄÈÅ∏Êäû',
                    'multiple': 'Ë§áÊï∞ÈÅ∏Êäû',
                    'truefalse': '‚óã√óÂïèÈ°å'
                };
                
                let explanationHtml = '';
                if (currentUser.plan === 'premium' && question.explanation) {
                    explanationHtml = `
                        <div class="mt-4 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                            <div class="flex items-start">
                                <span class="text-blue-500 mr-2 mt-1">üí°</span>
                                <div>
                                    <h5 class="font-medium text-blue-800 mb-1">Ëß£Ë™¨</h5>
                                    <p class="text-blue-700 text-sm">${question.explanation}</p>
                                </div>
                            </div>
                        </div>
                    `;
                } else if (currentUser.plan === 'free') {
                    explanationHtml = `
                        <div class="mt-4 p-3 bg-gray-50 rounded-lg border-l-4 border-gray-300">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <span class="text-gray-400 mr-2">üîí</span>
                                    <span class="text-gray-600 text-sm">Ëß£Ë™¨„ÅØ„Éó„É¨„Éü„Ç¢„É†„Éó„É©„É≥ÈôêÂÆö„Åß„Åô</span>
                                </div>
                                <button onclick="showUpgradeModal()" class="text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full hover:shadow-lg transition-all">
                                    „Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ
                                </button>
                            </div>
                        </div>
                    `;
                }

                resultCard.innerHTML = `
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex items-center">
                            <span class="text-lg ${isCorrect ? 'text-green-600' : 'text-red-600'} mr-2">
                                ${isCorrect ? '‚úÖ' : '‚ùå'}
                            </span>
                            <span class="font-medium text-gray-800">ÂïèÈ°å ${index + 1}</span>
                            <span class="ml-2 px-2 py-1 text-xs bg-blue-100 text-blue-600 rounded">${question.category || 'Êú™ÂàÜÈ°û'}</span>
                            <span class="ml-1 px-2 py-1 text-xs bg-purple-100 text-purple-600 rounded">${question.difficulty || 'Êú™Ë®≠ÂÆö'}</span>
                            <span class="ml-1 px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded">${typeText[question.type]}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <p class="text-gray-800 font-medium mb-2">${question.question}</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mb-3">
                        <div>
                            <span class="font-medium text-gray-600">„ÅÇ„Å™„Åü„ÅÆÂõûÁ≠î:</span>
                            <div class="mt-1">
                                ${userAnswer.length > 0 ? 
                                    userAnswer.map(ans => `<span class="inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded mr-1 mb-1">${ans}</span>`).join('') : 
                                    '<span class="text-gray-400">Êú™ÂõûÁ≠î</span>'
                                }
                            </div>
                        </div>
                        <div>
                            <span class="font-medium text-gray-600">Ê≠£Ëß£:</span>
                            <div class="mt-1">
                                ${correctAnswer.map(ans => `<span class="inline-block bg-green-100 text-green-800 px-2 py-1 rounded mr-1 mb-1">${ans}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                    ${explanationHtml}
                `;
                
                container.appendChild(resultCard);
            });
        }

        function hideDetailedResults() {
            document.getElementById('detailedResults').classList.add('hidden');
        }

        function arraysEqual(a, b) {
            return a.length === b.length && a.every((val, index) => val === b[index]);
        }

        function restartQuiz() {
            // „Çø„Ç§„Éû„Éº„Çí„ÇØ„É™„Ç¢
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            document.getElementById('resultContainer').classList.add('hidden');
            document.getElementById('detailedResults').classList.add('hidden');
            document.getElementById('achievementSection').classList.add('hidden');
            document.getElementById('setupPanel').classList.remove('hidden');
            document.getElementById('validationResults').classList.add('hidden');
            document.getElementById('startQuizSection').classList.add('hidden');
            
            currentQuestionIndex = 0;
            userAnswers = [];
            selectedAnswers.clear();
            timeRemaining = 0;
            quizStartTime = null;
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9638a800109c969c',t:'MTc1MzI0NzI2OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
